(()=>{"use strict";var e,t={14086:(e,t,r)=>{var i=function e(t){var r="G",i=null;void 0!==t?("string"==typeof t&&(t=JSON.parse(t)),this.id=t.id,r=t.role,this.name=t.name,this.email=t.email,this.userId=t.user,null!==(i=e.instantiateMember(t))&&(i.user=this)):(this.id=0,r="G",this.name="",this.email="",this.userId=""),Object.defineProperty(this,"member",{get:function(){return i}}),this.role=function(){return null!==i?i.role():r},this.setUserRole=function(e){r=e},this.userRole=function(){return r},this.setMember=function(e){null!==(i=e)&&(i.user=this)}};i.GUEST="G",i.USER="U",i.STAFF="S",i.ADMIN="A",i.getUserRoles=function(){var e={};return e[i.GUEST]={name:"Guest",priority:1},e[i.USER]={name:"User",priority:2},e[i.STAFF]={name:"Staff",priority:3},e[i.ADMIN]={name:"Admin",priority:4},e},i.prototype.getUserRoles=function(){return i.getUserRoles()},i.prototype.getRoles=function(){var e=this.member;return null!==e?e.getRoles():i.getUserRoles()},i.prototype.atLeast=function(e){var t=this.role(),r=this.getRoles();return!!r.hasOwnProperty(e)&&r[t].priority>=r[e].priority},i.prototype.getRolePriority=function(e){var t=this.getRoles();return t.hasOwnProperty(e)?t[e].priority:0},i.prototype.displayName=function(){var e=this.name.indexOf(",");if(e<0)return this.name;var t=this.name.substr(0,e);return this.name.substr(e+1).trim()+" "+t},i.prototype.userRoleName=function(e){var t=this.getUserRoles()[this.userRole()];return void 0===t?"Invalid":!0===e&&void 0!==t.short?t.short:t.name},i.prototype.roleName=function(e){var t=this.getRoles()[this.role()];return void 0===t?"Invalid":!0===e&&void 0!==t.short?t.short:t.name},i.prototype.roleToName=function(e,t){var r=this.getRoles()[e];return void 0===r?"Invalid":!0===t&&void 0!==r.short?r.short:r.name},i.compare=function(e,t){var r=e.name.toLowerCase(),i=t.name.toLowerCase();return r<i?-1:r>i?1:e.id-t.id},i.instantiateMember=function(e){return null};var n={namespaced:!0,state:{user:null},mutations:{set:function(e,t){e.user=t instanceof i?t:new i(t)}}},s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.delayedFetching?r("div",{staticClass:"fetching"},[r("p",[e._v("Fetching from server...")])]):e._e(),e._v(" "),null!==e.fetcher&&e.fetcher.fetching||e.fetching?e._e():e._t("default"),e._v(" "),null!==e.fetcher&&e.fetcher.more?r("p",{staticClass:"more"},[r("button",{on:{click:function(t){return t.preventDefault(),e.fetchMore.apply(null,arguments)}}},[e._v("MORE")])]):e._e()],2)};s._withStripped=!0;var o=function(){this.more=!1,this.fetching=!1,this.fetched=!1,this.start=function(e){this.fetching=!0,!0!==e&&(this.more=!1)},this.done=function(e){this.fetching=!1,!0!==e&&(this.fetched=!0)},this.reset=function(){this.more=!1,this.fetching=!1,this.fetched=!1}};const a={props:{fetcher:{type:Object,default:null},fetching:{type:Boolean,default:!1}},watch:{"fetcher.fetching":function(e,t){this.setFetching()},fetching:function(e,t){this.setFetching()}},data:function(){return{showFetching:!1,delayedFetching:!1,timer:null}},mounted:function(){this.setFetching()},methods:{fetchMore:function(){this.$parent.fetchMore()},setFetching:function(){var e=this,t=null!==this.fetcher&&this.fetcher.fetching||this.fetching;t&&!this.showFetching?this.timer=setTimeout((function(){e.delayedFetching=!0}),1e3):!t&&this.showFetching&&(clearTimeout(this.timer),this.time=null,this.delayedFetching=!1),this.showFetching=t}}};var l=r(6559),u=r.n(l),c=r(24037),h=r.n(c),f=r(75767),d=r.n(f),v=r(57204),p=r.n(v),m=r(33833),g=r.n(m),b=r(26310),y=r.n(b),_=r(58645),S={};S.styleTagTransform=y(),S.setAttributes=p(),S.insert=d().bind(null,"head"),S.domAPI=h(),S.insertStyleElement=g();u()(_.Z,S);_.Z&&_.Z.locals&&_.Z.locals;var w=r(12291),x=(0,w.Z)(a,s,[],!1,null,"43b26bcb",null);x.options.__file="vendor/cl/users/js/Lib/FetcherVue.vue";const U=x.exports;var E=function(){};E.create=function(e,t){return{namespaced:!0,state:{users:[],fetcher:new o,query:{}},mutations:{add:function(e,t){e.users.push(t)},more:function(e,t){e.fetcher.more=t},fetchStart:function(e,t){e.fetcher.start(t)},fetchDone:function(e,t){e.fetcher.done(t)},reset:function(e,t){e.fetcher.reset(),e.users=[]},query:function(e,t){e.query=t},update:function(e,r){if(e.fetcher.fetched){if(0===e.users.length)return e.fetcher.reset(),void(e.users=[]);for(var n=0;n<e.users.length;n++)if(t(r)===t(e.users[n]))return e.users[n]=r,e.fetcher.more&&i.compare(r,e.users[e.users.length-1])>=0?(e.fetcher.reset(),void(e.users=[])):void e.users.sort(i.compare);e.fetcher.more=!0}},new:function(e,t){if(e.fetcher.fetched)if(0!==e.users.length){if(!e.fetcher.more)return e.users.push(t),void e.users.sort(i.compare);if(i.compare(t,e.users[e.users.length-1])>=0)return e.fetcher.reset(),void(e.users=[]);e.users.push(t),e.users.sort(i.compare)}else e.users.push(t)},delete:function(e,r){for(var i=0;i<e.users.length;i++)if(t(e.users[i])===r){e.users.splice(i,1);break}}},actions:{fetch:function(e){var t=e.dispatch;e.state.fetcher.fetched||t("more")},more:function(t){var r=this,i=t.commit,n=t.state;if(!n.fetcher.fetched||n.fetcher.more){i("fetchStart");var s={limit:500,offset:n.users.length};Object.assign(s,n.query),Site.api.get(e,s).then((function(e){if(e.hasError())console.log(e),Site.toast(r,e);else{var t=e.getData("users");if(null!==t){var n=!1;t.attributes.forEach((function(e){"yes"===e.more?n=!0:i("add",new Site.User(e))})),i("more",n),i("fetchDone")}}})).catch((function(e){console.log(e),Site.toast(r,e)}))}},get:function(t,r){var i=this,n=t.commit;t.state;return new Promise((function(t,s){n("fetchStart",!0),r.prevnext=1,Site.api.get(e,r).then((function(e){if(e.hasError())console.log(e),Site.toast(i,e);else{var r=e.getData("users");if(null!==r)if(r.attributes.length<1)s("User does not exist");else{n("fetchDone",!0);var o=new Site.User(r.attributes[0]),a=e.getData("prev-user");null!==a&&(o.prev=new Site.User(a.attributes));var l=e.getData("next-user");null!==l&&(o.next=new Site.User(l.attributes)),t(o)}}})).catch((function(e){console.log(e),Site.toast(i,e)}))}))},update:function(t,r){var i=this,n=t.commit;t.state;return new Promise((function(t,s){Site.api.post(e+"/update",r).then((function(e){if(e.hasError())s(e);else{var r=e.getData("updated-user"),i=new Site.User(r.attributes);n("update",i),t(i)}})).catch((function(e){Site.toast(i,e)}))}))},new:function(t,r){var i=this,n=t.commit;t.state;return new Promise((function(t,s){Site.api.post(e+"/new",r).then((function(e){if(e.hasError())console.log("reject"),s(e);else{var r=e.getData("new-user"),i=new Site.User(r.attributes);n("new",i),t(i)}})).catch((function(e){Site.toast(i,e)}))}))},delete:function(t,r){var i=this,n=t.commit;t.state;return new Promise((function(t,s){Site.api.post(e+"/delete",{id:r.id}).then((function(e){e.hasError()?(console.log(e),Site.toast(i,e)):(n("delete",r.id),t())})).catch((function(e){console.log(e),Site.toast(i,e)}))}))}}}};var D=function(e){this.permissions=e,this.atLeast=function(e,t){return void 0!==this.permissions[e]?this.permissions[e]:t}},A=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content cl-about-me"},[r("div",{staticClass:"full"},[r("mask-vue",{attrs:{mask:e.mask}},[e._v("Communicating with server...")]),e._v(" "),r("form",{attrs:{method:"post"},on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[r("table",{staticClass:"small"},[e._m(0),e._v(" "),e._l(e.prefData,(function(t){return r("tr",[r("td",[e._v(e._s(t.desc))]),e._v(" "),e.editing&&null!==t.editor?r("td",{domProps:{innerHTML:e._s(t.editor)}}):r("td",[e._v(e._s(e.value(t)))]),e._v(" "),r("td",[e._v(e._s(t.comment))])])}))],2),e._v(" "),e.editing?r("p",{staticClass:"center"},[r("button",{attrs:{type:"submit"}},[e._v("Submit")]),e._v(" "),r("button",{on:{click:function(t){return t.preventDefault(),e.cancel.apply(null,arguments)}}},[e._v("Cancel")])]):r("p",{staticClass:"center"},[r("button",{on:{click:function(t){return t.preventDefault(),e.edit.apply(null,arguments)}}},[e._v("Edit")])])])],1)])};A._withStripped=!0;var O=r(34312);const M={extends:Site.Site.PageVueBase,computed:{user:function(){return this.$store.state.user.user}}};var T=(0,w.Z)(M,undefined,undefined,!1,null,null,null);T.options.__file="vendor/cl/users/js/Vue/UserVueBase.vue";const k=T.exports;function C(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw s}}}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var P=Site.MaskVue;const R={extends:k,props:["json"],data:function(){return{prefData:[],editing:!1,mask:!1}},components:{maskVue:P},mounted:function(){this.setTitle("About "+this.user.displayName()),this.prefData=this.json},methods:{edit:function(){this.editing=!0},cancel:function(){this.editing=!1},submit:function(){var e,t=this,r={},i=C(this.prefData);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(null!==n.editor){var s=document.getElementById(n.tag);if(null!==s){var o=s.value;if(r[n.tag]=o,"email"===n.type&&!this.validEmail(o))return void new O.Z.MessageBox("Invalid Email!","Must provide a valid email address.",O.Z.MessageBox.OK,(function(){}))}}}}catch(e){i.e(e)}finally{i.f()}this.mask=!0,this.$site.api.post("/api/users/aboutme",r).then((function(e){if(t.mask=!1,e.hasError())t.$site.toast(t,e);else{t.prefData=e.getData("preferences-data").attributes;var r=new Site.User(e.getData("user").attributes);t.$store.commit("user/set",r),t.editing=!1}})).catch((function(e){t.mask=!1,t.$site.toast(t,e)}))},validEmail:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},value:function(e){return"password"===e.type?""===e.value||null===e.value?"":"********":e.value}}};var Z=r(58909),j={};j.styleTagTransform=y(),j.setAttributes=p(),j.insert=d().bind(null,"head"),j.domAPI=h(),j.insertStyleElement=g();u()(Z.Z,j);Z.Z&&Z.Z.locals&&Z.Z.locals;var q=(0,w.Z)(R,A,[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",[r("th",[e._v(" ")]),r("th",[e._v(" ")]),r("th",[e._v(" ")])])}],!1,null,null,null);q.options.__file="vendor/cl/users/js/AboutMe/AboutMe.vue";const F=q.exports;var V=function(){};V.create=function(e){var t=function(){};t.MUST_PROVIDE_USERID_OR_EMAIL=101,t.PASSWORDS_MUST_MATCH=102,t.DUPLICATE_USER=103,t.DUPLICATE_EMAIL=104;var r=e.store;return void 0!==r&&(r.registerModule("user",n),r.registerModule("users",E.create("/api/users",(function(e){return e.id})))),e.ready((function(){var t;null!==(t=document.getElementById("cl-user"))&&r.commit("user/set",JSON.parse(t.textContent)),null!==(t=document.getElementById("cl-permissions"))&&(e.permissions=new D(JSON.parse(t.textContent))),e.PageVue.create("div.cl-users-aboutme","Example Vue",F,e.PageNav)})),e.UserVueBase=k,e.User=i,e.StoreModuleUsers=E,t};var N=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("div",{staticClass:"cl-input"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],attrs:{type:"text",maxlength:"150"},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}}),e._v(" "),r("a",{staticClass:"searcher",on:{click:function(t){return t.preventDefault(),e.fetch(e.query)}}},[r("img",{attrs:{src:e.root+"/cl/img/search.png"}})]),e._v(" "),e.result.length>0||e.noresult?r("div",{staticClass:"cl-results"},[r("div",{staticClass:"cl-result-list"},e._l(e.result,(function(t){return r("div",{on:{click:function(r){return r.preventDefault(),e.selectUser(t)}}},[r("span",[r("a",{on:{click:function(r){return r.preventDefault(),e.selectUser(t)}}},[e._v(e._s(t.userId))])]),e._v(" "),r("span",[r("a",{on:{click:function(r){return r.preventDefault(),e.selectUser(t)}}},[e._v(e._s(t.name))])])])})),0),e._v(" "),e.noresult?r("div",{staticClass:"statement"},[e._v("No results...")]):e._e(),e._v(" "),e.more?r("div",{staticClass:"statement"},[e._v("...more...")]):e._e()]):e._e()]),e._v(" "),r("a",{on:{click:function(t){return t.preventDefault(),e.clear.apply(null,arguments)}}},[r("img",{attrs:{src:e.root+"/cl/img/x.png"}})])])};N._withStripped=!0;const $={props:["selected"],data:function(){return{query:"",result:[],noresult:!1,seq:1,fetched:!1,timer:null,set:!1,more:!1,root:Site.root}},watch:{query:function(e,t){var r=this;this.set?this.set=!1:(null!==this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout((function(){r.fetch(e)}),300))}},methods:{fetch:function(e){var t=this;if(null!==this.timer&&(clearTimeout(this.timer),this.timer=null),this.selected(null),(e=e.trim()).length<2)return this.fetched=!1,void(this.result=[]);this.seq++,Site.api.get("/api/users",{search:e,seq:this.seq,limit:20}).then((function(e){if(e.hasError())Site.toast(t,e);else{if(+e.getData("seq").id!==t.seq)return;var r=e.getData("users");null!==r&&(t.result=[],t.more=!1,r.attributes.forEach((function(e){if("yes"!==e.more){var r=new Site.User(e);t.result.push(r)}else t.more=!0})),t.noresult=0===t.result.length)}})).catch((function(e){console.log(e),Site.toast(t,e)}))},selectUser:function(e){this.query=e.name,this.set=!0,this.result=[],this.noresult=!1,this.more=!1,this.selected(e)},clear:function(){this.seq++,this.result=[],this.noresult=!1,this.more=!1,this.query="",this.selected(null)}}};var L=r(48495),B={};B.styleTagTransform=y(),B.setAttributes=p(),B.insert=d().bind(null,"head"),B.domAPI=h(),B.insertStyleElement=g();u()(L.Z,B);L.Z&&L.Z.locals&&L.Z.locals;var G=(0,w.Z)($,N,[],!1,null,"e8e7f840",null);G.options.__file="vendor/cl/users/js/Lib/UserSelectorVue.vue";const z=G.exports;var J=V.create(Site.site);r.g.Users=J,Site.FetcherVue=U,Site.Users=J,Site.User=i,Site.UserVueBase=k,Site.UserSelectorVue=z},58909:(e,t,r)=>{r.d(t,{Z:()=>a});var i=r(78018),n=r.n(i),s=r(14104),o=r.n(s)()(n());o.push([e.id,"div.cl-about-me table tr td:nth-child(2){min-width:195px}div.cl-about-me button{width:7em}div.cl-about-me input{width:100%}",""]);const a=o},58645:(e,t,r)=>{r.d(t,{Z:()=>a});var i=r(78018),n=r.n(i),s=r(14104),o=r.n(s)()(n());o.push([e.id,"div.fetching[data-v-43b26bcb]{height:28px;margin:1em 0}div.fetching p[data-v-43b26bcb]{text-align:center;font-style:italic;color:#c41425;padding-top:2px}.more[data-v-43b26bcb]{text-align:center}.more button[data-v-43b26bcb]{font-size:.8em;height:28px;margin:0}",""]);const a=o},48495:(e,t,r)=>{r.d(t,{Z:()=>a});var i=r(78018),n=r.n(i),s=r(14104),o=r.n(s)()(n());o.push([e.id,"a.searcher[data-v-e8e7f840]{position:absolute;top:0;right:0;height:100%;min-height:100%;width:21px;text-align:center;background:#aaa}a.searcher img[data-v-e8e7f840]{height:16px;width:16px;vertical-align:-4px}div.cl-input[data-v-e8e7f840]{display:inline-block;position:relative;width:300px}div.cl-input input[data-v-e8e7f840]{width:100%;border:1px solid #ccc}div.cl-input div.cl-results[data-v-e8e7f840]{position:absolute;left:0;right:0;top:100%;overflow:hidden;font-size:.85em;background:#fff;border-left:1px solid #000;border-right:1px solid #000;border-bottom:1px solid #000}div.cl-input div.cl-results div.cl-result-list[data-v-e8e7f840]{display:table;width:100%}div.cl-input div.cl-results div.cl-result-list div[data-v-e8e7f840]{display:table-row;border-bottom:1px solid #888;cursor:pointer}div.cl-input div.cl-results div.cl-result-list div span[data-v-e8e7f840]{display:table-cell;white-space:nowrap;text-align:left;padding:.5em .25em}div.cl-input div.cl-results div.cl-result-list div span a[data-v-e8e7f840]{text-decoration:none;color:#000}div.cl-input div.cl-results div.cl-result-list div span a[data-v-e8e7f840]:hover{color:#888}div.cl-input div.cl-results div.cl-result-list div span[data-v-e8e7f840]:first-child{font-style:italic}div.cl-input div.cl-results div.cl-result-list div span[data-v-e8e7f840]:last-child{overflow:hidden;width:99%}div.cl-input div.cl-results div.cl-result-list div:first-child span[data-v-e8e7f840],div.cl-input div.cl-results div.cl-result-list div:last-child span[data-v-e8e7f840]{padding:.25em .25em}div.cl-input div.cl-results div.statement[data-v-e8e7f840]{width:100%;text-align:center;font-style:italic}",""]);const a=o}},r={};function i(e){var n=r[e];if(void 0!==n)return n.exports;var s=r[e]={id:e,loaded:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}i.m=t,e=[],i.O=(t,r,n,s)=>{if(!r){var o=1/0;for(c=0;c<e.length;c++){for(var[r,n,s]=e[c],a=!0,l=0;l<r.length;l++)(!1&s||o>=s)&&Object.keys(i.O).every((e=>i.O[e](r[l])))?r.splice(l--,1):(a=!1,s<o&&(o=s));if(a){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[r,n,s]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),i.j=530,(()=>{var e={530:0};i.O.j=t=>0===e[t];var t=(t,r)=>{var n,s,[o,a,l]=r,u=0;if(o.some((t=>0!==e[t]))){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);if(l)var c=l(i)}for(t&&t(r);u<o.length;u++)s=o[u],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(c)},r=self.webpackChunkcourselib=self.webpackChunkcourselib||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),i.nc=void 0;var n=i.O(void 0,[592,736],(()=>i(14086)));n=i.O(n)})();