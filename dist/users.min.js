!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Users=t():e.Users=t()}(window,function(){return function(e){function t(t){for(var r,n,o=t[0],i=t[1],l=t[2],d=0,u=[];d<o.length;d++)n=o[d],D[n]&&u.push(D[n][0]),D[n]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);for(R&&R(t);u.length;)u.shift()();return M.push.apply(M,l||[]),s()}function s(){for(var e,t=0;t<M.length;t++){for(var s=M[t],r=!0,n=1;n<s.length;n++){var o=s[n];0!==D[o]&&(r=!1)}r&&(M.splice(t--,1),e=V(V.s=s[0]))}return e}var r=window.webpackHotUpdate_name_;window.webpackHotUpdate_name_=function(e,t){!function(e,t){if(!j[e]||!_[e])return;for(var s in _[e]=!1,t)Object.prototype.hasOwnProperty.call(t,s)&&(h[s]=t[s]);0==--b&&0===y&&U()}(e,t),r&&r(e,t)};var n,o=!0,i="2410f496ad8ac3952dc1",l=1e4,d={},u=[],c=[];var a=[],p="idle";function f(e){p=e;for(var t=0;t<a.length;t++)a[t].call(null,e)}var v,h,m,b=0,y=0,g={},_={},j={};function x(e){return+e+""===e?+e:e}function w(e){if("idle"!==p)throw new Error("check() is only allowed in idle status");return o=e,f("check"),function(e){return e=e||1e4,new Promise(function(t,s){if("undefined"==typeof XMLHttpRequest)return s(new Error("No browser support"));try{var r=new XMLHttpRequest,n=V.p+""+i+".hot-update.json";r.open("GET",n,!0),r.timeout=e,r.send(null)}catch(e){return s(e)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)s(new Error("Manifest request to "+n+" timed out."));else if(404===r.status)t();else if(200!==r.status&&304!==r.status)s(new Error("Manifest request to "+n+" failed."));else{try{var e=JSON.parse(r.responseText)}catch(e){return void s(e)}t(e)}}})}(l).then(function(e){if(!e)return f("idle"),null;_={},g={},j=e.c,m=e.h,f("prepare");var t=new Promise(function(e,t){v={resolve:e,reject:t}});for(var s in h={},D)S(s);return"prepare"===p&&0===y&&0===b&&U(),t})}function S(e){j[e]?(_[e]=!0,b++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=V.p+""+e+"."+i+".hot-update.js",document.head.appendChild(t)}(e)):g[e]=!0}function U(){f("ready");var e=v;if(v=null,e)if(o)Promise.resolve().then(function(){return L(o)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var s in h)Object.prototype.hasOwnProperty.call(h,s)&&t.push(x(s));e.resolve(t)}}function L(t){if("ready"!==p)throw new Error("apply() is only allowed in ready status");var s,r,n,o,l;function c(e){for(var t=[e],s={},r=t.slice().map(function(e){return{chain:[e],id:e}});r.length>0;){var n=r.pop(),i=n.id,l=n.chain;if((o=O[i])&&!o.hot._selfAccepted){if(o.hot._selfDeclined)return{type:"self-declined",chain:l,moduleId:i};if(o.hot._main)return{type:"unaccepted",chain:l,moduleId:i};for(var d=0;d<o.parents.length;d++){var u=o.parents[d],c=O[u];if(c){if(c.hot._declinedDependencies[i])return{type:"declined",chain:l.concat([u]),moduleId:i,parentId:u};-1===t.indexOf(u)&&(c.hot._acceptedDependencies[i]?(s[u]||(s[u]=[]),a(s[u],[i])):(delete s[u],t.push(u),r.push({chain:l.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:s}}function a(e,t){for(var s=0;s<t.length;s++){var r=t[s];-1===e.indexOf(r)&&e.push(r)}}t=t||{};var v={},b=[],y={},g=function(){console.warn("[HMR] unexpected require("+w.moduleId+") to disposed module")};for(var _ in h)if(Object.prototype.hasOwnProperty.call(h,_)){var w;l=x(_);var S=!1,U=!1,L=!1,M="";switch((w=h[_]?c(l):{type:"disposed",moduleId:_}).chain&&(M="\nUpdate propagation: "+w.chain.join(" -> ")),w.type){case"self-declined":t.onDeclined&&t.onDeclined(w),t.ignoreDeclined||(S=new Error("Aborted because of self decline: "+w.moduleId+M));break;case"declined":t.onDeclined&&t.onDeclined(w),t.ignoreDeclined||(S=new Error("Aborted because of declined dependency: "+w.moduleId+" in "+w.parentId+M));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(w),t.ignoreUnaccepted||(S=new Error("Aborted because "+l+" is not accepted"+M));break;case"accepted":t.onAccepted&&t.onAccepted(w),U=!0;break;case"disposed":t.onDisposed&&t.onDisposed(w),L=!0;break;default:throw new Error("Unexception type "+w.type)}if(S)return f("abort"),Promise.reject(S);if(U)for(l in y[l]=h[l],a(b,w.outdatedModules),w.outdatedDependencies)Object.prototype.hasOwnProperty.call(w.outdatedDependencies,l)&&(v[l]||(v[l]=[]),a(v[l],w.outdatedDependencies[l]));L&&(a(b,[w.moduleId]),y[l]=g)}var P,E=[];for(r=0;r<b.length;r++)l=b[r],O[l]&&O[l].hot._selfAccepted&&E.push({module:l,errorHandler:O[l].hot._selfAccepted});f("dispose"),Object.keys(j).forEach(function(e){!1===j[e]&&function(e){delete D[e]}(e)});for(var F,R,I=b.slice();I.length>0;)if(l=I.pop(),o=O[l]){var k={},q=o.hot._disposeHandlers;for(n=0;n<q.length;n++)(s=q[n])(k);for(d[l]=k,o.hot.active=!1,delete O[l],delete v[l],n=0;n<o.children.length;n++){var A=O[o.children[n]];A&&((P=A.parents.indexOf(l))>=0&&A.parents.splice(P,1))}}for(l in v)if(Object.prototype.hasOwnProperty.call(v,l)&&(o=O[l]))for(R=v[l],n=0;n<R.length;n++)F=R[n],(P=o.children.indexOf(F))>=0&&o.children.splice(P,1);for(l in f("apply"),i=m,y)Object.prototype.hasOwnProperty.call(y,l)&&(e[l]=y[l]);var H=null;for(l in v)if(Object.prototype.hasOwnProperty.call(v,l)&&(o=O[l])){R=v[l];var T=[];for(r=0;r<R.length;r++)if(F=R[r],s=o.hot._acceptedDependencies[F]){if(-1!==T.indexOf(s))continue;T.push(s)}for(r=0;r<T.length;r++){s=T[r];try{s(R)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:l,dependencyId:R[r],error:e}),t.ignoreErrored||H||(H=e)}}}for(r=0;r<E.length;r++){var C=E[r];l=C.module,u=[l];try{V(l)}catch(e){if("function"==typeof C.errorHandler)try{C.errorHandler(e)}catch(s){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:l,error:s,originalError:e}),t.ignoreErrored||H||(H=s),H||(H=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:l,error:e}),t.ignoreErrored||H||(H=e)}}return H?(f("fail"),Promise.reject(H)):(f("idle"),new Promise(function(e){e(b)}))}var O={},D={24:0},M=[];function V(t){if(O[t])return O[t].exports;var s=O[t]={i:t,l:!1,exports:{},hot:function(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:n!==e,active:!0,accept:function(e,s){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=s||function(){};else t._acceptedDependencies[e]=s||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var s=0;s<e.length;s++)t._declinedDependencies[e[s]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var s=t._disposeHandlers.indexOf(e);s>=0&&t._disposeHandlers.splice(s,1)},check:w,apply:L,status:function(e){if(!e)return p;a.push(e)},addStatusHandler:function(e){a.push(e)},removeStatusHandler:function(e){var t=a.indexOf(e);t>=0&&a.splice(t,1)},data:d[e]};return n=void 0,t}(t),parents:(c=u,u=[],c),children:[]};return e[t].call(s.exports,s,s.exports,function(e){var t=O[e];if(!t)return V;var s=function(s){return t.hot.active?(O[s]?-1===O[s].parents.indexOf(e)&&O[s].parents.push(e):(u=[e],n=s),-1===t.children.indexOf(s)&&t.children.push(s)):(console.warn("[HMR] unexpected require("+s+") from disposed module "+e),u=[]),V(s)},r=function(e){return{configurable:!0,enumerable:!0,get:function(){return V[e]},set:function(t){V[e]=t}}};for(var o in V)Object.prototype.hasOwnProperty.call(V,o)&&"e"!==o&&"t"!==o&&Object.defineProperty(s,o,r(o));return s.e=function(e){return"ready"===p&&f("prepare"),y++,V.e(e).then(t,function(e){throw t(),e});function t(){y--,"prepare"===p&&(g[e]||S(e),0===y&&0===b&&U())}},s.t=function(e,t){return 1&t&&(e=s(e)),V.t(e,-2&t)},s}(t)),s.l=!0,s.exports}V.m=e,V.c=O,V.d=function(e,t,s){V.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},V.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},V.t=function(e,t){if(1&t&&(e=V(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(V.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)V.d(s,r,function(t){return e[t]}.bind(null,r));return s},V.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return V.d(t,"a",t),t},V.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},V.p="/cl/dist/",V.h=function(){return i};var P=window.webpackJsonp_name_=window.webpackJsonp_name_||[],E=P.push.bind(P);P.push=t,P=P.slice();for(var F=0;F<P.length;F++)t(P[F]);var R=E;return M.push(["./vendor/cl/users/index.js",0]),s()}({"./node_modules/css-loader/index.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js?sourceMap!./node_modules/vue-loader/lib/index.js?!./vendor/cl/users/js/Lib/FetcherVue.vue?vue&type=style&index=0&id=43b26bcb&lang=scss&scoped=true&":function(e,t,s){(e.exports=s("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,"div.fetching[data-v-43b26bcb] {\n  height: 28px;\n  margin: 1em 0;\n}\ndiv.fetching p[data-v-43b26bcb] {\n  text-align: center;\n  font-style: italic;\n  color: #c41425;\n  padding-top: 2px;\n}\n.more[data-v-43b26bcb] {\n  text-align: center;\n}\n.more button[data-v-43b26bcb] {\n  font-size: 0.8em;\n  height: 28px;\n  margin: 0;\n}",""])},"./node_modules/css-loader/index.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js?sourceMap!./node_modules/vue-loader/lib/index.js?!./vendor/cl/users/js/Lib/UserSelectorVue.vue?vue&type=style&index=0&id=e8e7f840&lang=scss&scoped=true&":function(e,t,s){(e.exports=s("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,"a.searcher[data-v-e8e7f840] {\n  position: absolute;\n  top: 0;\n  right: 0;\n  height: 100%;\n  min-height: 100%;\n  width: 21px;\n  text-align: center;\n  background: #aaaaaa;\n}\na.searcher img[data-v-e8e7f840] {\n  height: 16px;\n  width: 16px;\n  vertical-align: -4px;\n}\ndiv.cl-input[data-v-e8e7f840] {\n  display: inline-block;\n  position: relative;\n  width: 300px;\n}\ndiv.cl-input input[data-v-e8e7f840] {\n  width: 100%;\n  border: 1px solid #cccccc;\n}\ndiv.cl-input div.cl-results[data-v-e8e7f840] {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 100%;\n  overflow: hidden;\n  font-size: 0.85em;\n  background: white;\n  border-left: 1px solid black;\n  border-right: 1px solid black;\n  border-bottom: 1px solid black;\n}\ndiv.cl-input div.cl-results div.cl-result-list[data-v-e8e7f840] {\n  display: table;\n  width: 100%;\n}\ndiv.cl-input div.cl-results div.cl-result-list div[data-v-e8e7f840] {\n  display: table-row;\n  border-bottom: 1px solid #888888;\n  cursor: pointer;\n}\ndiv.cl-input div.cl-results div.cl-result-list div span[data-v-e8e7f840] {\n  display: table-cell;\n  white-space: nowrap;\n  text-align: left;\n  padding: 0.5em 0.25em;\n}\ndiv.cl-input div.cl-results div.cl-result-list div span a[data-v-e8e7f840] {\n  text-decoration: none;\n  color: black;\n}\ndiv.cl-input div.cl-results div.cl-result-list div span a[data-v-e8e7f840]:hover {\n  color: #888888;\n}\ndiv.cl-input div.cl-results div.cl-result-list div span[data-v-e8e7f840]:first-child {\n  font-style: italic;\n}\ndiv.cl-input div.cl-results div.cl-result-list div span[data-v-e8e7f840]:last-child {\n  overflow: hidden;\n  width: 99%;\n}\ndiv.cl-input div.cl-results div.cl-result-list div:first-child span[data-v-e8e7f840],\ndiv.cl-input div.cl-results div.cl-result-list div:last-child span[data-v-e8e7f840] {\n  padding: 0.25em 0.25em;\n}\ndiv.cl-input div.cl-results div.statement[data-v-e8e7f840] {\n  width: 100%;\n  text-align: center;\n  font-style: italic;\n}",""])},"./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js?sourceMap!./node_modules/vue-loader/lib/index.js?!./vendor/cl/users/js/Lib/FetcherVue.vue?vue&type=style&index=0&id=43b26bcb&lang=scss&scoped=true&":function(e,t,s){var r=s("./node_modules/css-loader/index.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js?sourceMap!./node_modules/vue-loader/lib/index.js?!./vendor/cl/users/js/Lib/FetcherVue.vue?vue&type=style&index=0&id=43b26bcb&lang=scss&scoped=true&");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=(0,s("./node_modules/vue-style-loader/lib/addStylesClient.js").default)("451ec1a4",r,!1,{});r.locals||e.hot.accept("./node_modules/css-loader/index.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js?sourceMap!./node_modules/vue-loader/lib/index.js?!./vendor/cl/users/js/Lib/FetcherVue.vue?vue&type=style&index=0&id=43b26bcb&lang=scss&scoped=true&",function(){var t=s("./node_modules/css-loader/index.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js?sourceMap!./node_modules/vue-loader/lib/index.js?!./vendor/cl/users/js/Lib/FetcherVue.vue?vue&type=style&index=0&id=43b26bcb&lang=scss&scoped=true&");"string"==typeof t&&(t=[[e.i,t,""]]),n(t)}),e.hot.dispose(function(){n()})},"./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js?sourceMap!./node_modules/vue-loader/lib/index.js?!./vendor/cl/users/js/Lib/UserSelectorVue.vue?vue&type=style&index=0&id=e8e7f840&lang=scss&scoped=true&":function(e,t,s){var r=s("./node_modules/css-loader/index.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js?sourceMap!./node_modules/vue-loader/lib/index.js?!./vendor/cl/users/js/Lib/UserSelectorVue.vue?vue&type=style&index=0&id=e8e7f840&lang=scss&scoped=true&");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=(0,s("./node_modules/vue-style-loader/lib/addStylesClient.js").default)("fdefe8da",r,!1,{});r.locals||e.hot.accept("./node_modules/css-loader/index.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js?sourceMap!./node_modules/vue-loader/lib/index.js?!./vendor/cl/users/js/Lib/UserSelectorVue.vue?vue&type=style&index=0&id=e8e7f840&lang=scss&scoped=true&",function(){var t=s("./node_modules/css-loader/index.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js?sourceMap!./node_modules/vue-loader/lib/index.js?!./vendor/cl/users/js/Lib/UserSelectorVue.vue?vue&type=style&index=0&id=e8e7f840&lang=scss&scoped=true&");"string"==typeof t&&(t=[[e.i,t,""]]),n(t)}),e.hot.dispose(function(){n()})},"./vendor/cl/users/index.js":function(e,t,s){"use strict";s.r(t);var r=function e(t){var s="G",r=null;void 0!==t?("string"==typeof t&&(t=JSON.parse(t)),this.id=t.id,s=t.role,this.name=t.name,this.email=t.email,this.userId=t.user,null!==(r=e.instantiateMember(t))&&(r.user=this)):(this.id=0,s="G",this.name="",this.email="",this.userId=""),Object.defineProperty(this,"member",{get:function(){return r}}),this.role=function(){return null!==r?r.role():s},this.setUserRole=function(e){s=e},this.userRole=function(){return s},this.setMember=function(e){null!==(r=e)&&(r.user=this)}};r.GUEST="G",r.USER="U",r.STAFF="S",r.ADMIN="A",r.getUserRoles=function(){var e={};return e[r.GUEST]={name:"Guest",priority:1},e[r.USER]={name:"User",priority:2},e[r.STAFF]={name:"Staff",priority:3},e[r.ADMIN]={name:"Admin",priority:4},e},r.prototype.getUserRoles=function(){return r.getUserRoles()},r.prototype.getRoles=function(){var e=this.member;return null!==e?e.getRoles():r.getUserRoles()},r.prototype.atLeast=function(e){var t=this.role(),s=this.getRoles();return!!s.hasOwnProperty(e)&&s[t].priority>=s[e].priority},r.prototype.getRolePriority=function(e){var t=this.getRoles();return t.hasOwnProperty(e)?t[e].priority:0},r.prototype.displayName=function(){var e=this.name.indexOf(",");if(e<0)return this.name;var t=this.name.substr(0,e);return this.name.substr(e+1).trim()+" "+t},r.prototype.userRoleName=function(e){var t=this.getUserRoles()[this.userRole()];return void 0===t?"Invalid":!0===e&&void 0!==t.short?t.short:t.name},r.prototype.roleName=function(e){var t=this.getRoles()[this.role()];return void 0===t?"Invalid":!0===e&&void 0!==t.short?t.short:t.name},r.compare=function(e,t){var s=e.name.toLowerCase(),r=t.name.toLowerCase();return s<r?-1:s>r?1:e.id-t.id},r.instantiateMember=function(e){return null};var n={namespaced:!0,state:{user:null},mutations:{set:function(e,t){e.user=t instanceof r?t:new r(t)}}},o=s("./vendor/cl/users/js/Lib/FetcherVue.vue"),i=function(){};i.create=function(e,t){return{namespaced:!0,state:{users:[],fetcher:new o.a,query:{}},mutations:{add:function(e,t){e.users.push(t)},more:function(e,t){e.fetcher.more=t},fetchStart:function(e,t){e.fetcher.start(t)},fetchDone:function(e,t){e.fetcher.done(t)},reset:function(e,t){e.fetcher.reset(),e.users=[]},query:function(e,t){e.query=t},update:function(e,s){if(e.fetcher.fetched){if(0===e.users.length)return e.fetcher.reset(),void(e.users=[]);for(var n=0;n<e.users.length;n++)if(t(s)===t(e.users[n]))return e.users[n]=s,e.fetcher.more&&r.compare(s,e.users[e.users.length-1])>=0?(e.fetcher.reset(),void(e.users=[])):void e.users.sort(r.compare);e.fetcher.more=!0}},new:function(e,t){if(e.fetcher.fetched)if(0!==e.users.length){if(!e.fetcher.more)return e.users.push(t),void e.users.sort(r.compare);if(r.compare(t,e.users[e.users.length-1])>=0)return e.fetcher.reset(),void(e.users=[]);e.users.push(t),e.users.sort(r.compare)}else e.users.push(t)},delete:function(e,s){for(var r=0;r<e.users.length;r++)if(t(e.users[r])===s){e.users.splice(r,1);break}}},actions:{fetch:function(e){var t=e.dispatch;e.state.fetcher.fetched||t("more")},more:function(t){var s=this,r=t.commit,n=t.state;if(!n.fetcher.fetched||n.fetcher.more){r("fetchStart");var o={limit:500,offset:n.users.length};Object.assign(o,n.query),Site.api.get(e,o).then(function(e){if(e.hasError())console.log(e),Site.toast(s,e);else{var t=e.getData("users");if(null!==t){var n=!1;t.attributes.forEach(function(e){"yes"===e.more?n=!0:r("add",new Users.User(e))}),r("more",n),r("fetchDone")}}}).catch(function(e){console.log(e),Site.toast(s,e)})}},get:function(t,s){var r=this,n=t.commit;t.state;return new Promise(function(t,o){n("fetchStart",!0),s.prevnext=1,Site.api.get(e,s).then(function(e){if(e.hasError())console.log(e),Site.toast(r,e);else{var s=e.getData("users");if(null!==s)if(s.attributes.length<1)o("User does not exist");else{n("fetchDone",!0);var i=new Users.User(s.attributes[0]),l=e.getData("prev-user");null!==l&&(i.prev=new Users.User(l.attributes));var d=e.getData("next-user");null!==d&&(i.next=new Users.User(d.attributes)),t(i)}}}).catch(function(e){console.log(e),Site.toast(r,e)})})},update:function(t,s){var r=this,n=t.commit;t.state;return new Promise(function(t,o){Site.api.post(e+"/update",s).then(function(e){if(e.hasError())o(e);else{var s=e.getData("updated-user"),r=new Users.User(s.attributes);n("update",r),t(r)}}).catch(function(e){Site.toast(r,e)})})},new:function(t,s){var r=this,n=t.commit;t.state;return new Promise(function(t,o){Site.api.post(e+"/new",s).then(function(e){if(e.hasError())console.log("reject"),o(e);else{var s=e.getData("new-user"),r=new Users.User(s.attributes);n("new",r),t(r)}}).catch(function(e){Site.toast(r,e)})})},delete:function(t,s){var r=this,n=t.commit;t.state;return new Promise(function(t,o){Site.api.post(e+"/delete",{id:s.id}).then(function(e){e.hasError()?(console.log(e),Site.toast(r,e)):(n("delete",s.id),t())}).catch(function(e){console.log(e),Site.toast(r,e)})})}}}};var l=function(){};l.create=function(e){var t=function(){};t.MUST_PROVIDE_USERID_OR_EMAIL=101,t.PASSWORDS_MUST_MATCH=102,t.DUPLICATE_USER=103,t.DUPLICATE_EMAIL=104;var s=e.store;return void 0!==s&&(s.registerModule("user",n),s.registerModule("users",i.create("/api/users",function(e){return e.id}))),e.ready(function(){var t;null!==(t=document.getElementById("cl-user"))&&s.commit("user/set",JSON.parse(t.textContent)),null!==(t=document.getElementById("cl-permissions"))&&(e.permissions=new function(e){this.permissions=e,this.atLeast=function(e,t){return void 0!==this.permissions[e]?this.permissions[e]:t}}(JSON.parse(t.textContent)))}),e.User=r,e.StoreModuleUsers=i,t};var d=s("./vendor/cl/users/js/Lib/UserSelectorVue.vue"),u=s("./vendor/cl/users/js/Vue/UserVueBase.vue");s.d(t,"Users",function(){return c}),s.d(t,"FetcherVue",function(){return o.b}),s.d(t,"UserSelectorVue",function(){return d.a}),s.d(t,"User",function(){return r});var c=l.create(Site.site);Site.FetcherVue=o.b,Site.User=r,Site.UserVueBase=u.a,Site.UserSelectorVue=d.a},"./vendor/cl/users/js/Lib/FetcherVue.vue":function(e,t,s){"use strict";var r=s("./vendor/cl/users/js/Lib/FetcherVue.vue?vue&type=template&id=43b26bcb&scoped=true&"),n=s("./vendor/cl/users/js/Lib/FetcherVue.vue?vue&type=script&lang=js&");s.d(t,"a",function(){return n.a});s("./vendor/cl/users/js/Lib/FetcherVue.vue?vue&type=style&index=0&id=43b26bcb&lang=scss&scoped=true&");var o=s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),i=Object(o.a)(n.b,r.render,r.staticRenderFns,!1,null,"43b26bcb",null),l=s("./node_modules/vue-hot-reload-api/dist/index.js");l.install(s("./node_modules/vue/dist/vue.esm.js")),l.compatible&&(e.hot.accept(),e.hot.data?l.reload("43b26bcb",i.options):l.createRecord("43b26bcb",i.options),e.hot.accept("./vendor/cl/users/js/Lib/FetcherVue.vue?vue&type=template&id=43b26bcb&scoped=true&",function(e){r=s("./vendor/cl/users/js/Lib/FetcherVue.vue?vue&type=template&id=43b26bcb&scoped=true&"),l.rerender("43b26bcb",{render:r.render,staticRenderFns:r.staticRenderFns})})),i.options.__file="vendor/cl/users/js/Lib/FetcherVue.vue",t.b=i.exports},"./vendor/cl/users/js/Lib/FetcherVue.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";var r=function(){this.more=!1,this.fetching=!1,this.fetched=!1,this.start=function(e){this.fetching=!0,!0!==e&&(this.more=!1)},this.done=function(e){this.fetching=!1,!0!==e&&(this.fetched=!0)},this.reset=function(){this.more=!1,this.fetching=!1,this.fetched=!1}},n={props:{fetcher:{type:Object,default:null},fetching:{type:Boolean,default:!1}},watch:{"fetcher.fetching":function(e,t){this.setFetching()},fetching:function(e,t){this.setFetching()}},data:function(){return{showFetching:!1,delayedFetching:!1,timer:null}},mounted:function(){this.setFetching()},methods:{fetchMore:function(){this.$parent.fetchMore()},setFetching:function(){var e=this,t=null!==this.fetcher&&this.fetcher.fetching||this.fetching;t&&!this.showFetching?this.timer=setTimeout(function(){e.delayedFetching=!0},1e3):!t&&this.showFetching&&(clearTimeout(this.timer),this.time=null,this.delayedFetching=!1),this.showFetching=t}}};s.d(t,"a",function(){return r});t.b=n},"./vendor/cl/users/js/Lib/FetcherVue.vue?vue&type=style&index=0&id=43b26bcb&lang=scss&scoped=true&":function(e,t,s){"use strict";var r=s("./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js?sourceMap!./node_modules/vue-loader/lib/index.js?!./vendor/cl/users/js/Lib/FetcherVue.vue?vue&type=style&index=0&id=43b26bcb&lang=scss&scoped=true&");s.n(r).a},"./vendor/cl/users/js/Lib/FetcherVue.vue?vue&type=template&id=43b26bcb&scoped=true&":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.delayedFetching?s("div",{staticClass:"fetching"},[s("p",[e._v("Fetching from server...")])]):e._e(),e._v(" "),null!==e.fetcher&&e.fetcher.fetching||e.fetching?e._e():e._t("default"),e._v(" "),null!==e.fetcher&&e.fetcher.more?s("p",{staticClass:"more"},[s("button",{on:{click:function(t){return t.preventDefault(),e.fetchMore(t)}}},[e._v("MORE")])]):e._e()],2)},n=[];r._withStripped=!0,s.d(t,"render",function(){return r}),s.d(t,"staticRenderFns",function(){return n})},"./vendor/cl/users/js/Lib/UserSelectorVue.vue":function(e,t,s){"use strict";var r=s("./vendor/cl/users/js/Lib/UserSelectorVue.vue?vue&type=template&id=e8e7f840&scoped=true&"),n=s("./vendor/cl/users/js/Lib/UserSelectorVue.vue?vue&type=script&lang=js&"),o=(s("./vendor/cl/users/js/Lib/UserSelectorVue.vue?vue&type=style&index=0&id=e8e7f840&lang=scss&scoped=true&"),s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),i=Object(o.a)(n.a,r.render,r.staticRenderFns,!1,null,"e8e7f840",null),l=s("./node_modules/vue-hot-reload-api/dist/index.js");l.install(s("./node_modules/vue/dist/vue.esm.js")),l.compatible&&(e.hot.accept(),e.hot.data?l.reload("e8e7f840",i.options):l.createRecord("e8e7f840",i.options),e.hot.accept("./vendor/cl/users/js/Lib/UserSelectorVue.vue?vue&type=template&id=e8e7f840&scoped=true&",function(e){r=s("./vendor/cl/users/js/Lib/UserSelectorVue.vue?vue&type=template&id=e8e7f840&scoped=true&"),l.rerender("e8e7f840",{render:r.render,staticRenderFns:r.staticRenderFns})})),i.options.__file="vendor/cl/users/js/Lib/UserSelectorVue.vue",t.a=i.exports},"./vendor/cl/users/js/Lib/UserSelectorVue.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";var r={props:["selected"],data:function(){return{query:"",result:[],noresult:!1,seq:1,fetched:!1,timer:null,set:!1,more:!1,searcher:Site.root+"/vendor/cl/site/img/search.png",deleter:Site.root+"/vendor/cl/site/img/x.png"}},watch:{query:function(e,t){var s=this;this.set?this.set=!1:(null!==this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(function(){s.fetch(e)},300))}},methods:{fetch:function(e){var t=this;if(null!==this.timer&&(clearTimeout(this.timer),this.timer=null),this.selected(null),(e=e.trim()).length<2)return this.fetched=!1,void(this.result=[]);this.seq++,Site.api.get("/api/users",{search:e,seq:this.seq,limit:20}).then(function(e){if(e.hasError())Site.toast(t,e);else{if(+e.getData("seq").id!==t.seq)return;var s=e.getData("users");null!==s&&(t.result=[],t.more=!1,s.attributes.forEach(function(e){if("yes"!==e.more){var s=new Users.User(e);t.result.push(s)}else t.more=!0}),t.noresult=0===t.result.length)}}).catch(function(e){console.log(e),Site.toast(t,e)})},selectUser:function(e){this.query=e.name,this.set=!0,this.result=[],this.noresult=!1,this.more=!1,this.selected(e)},clear:function(){this.seq++,this.result=[],this.noresult=!1,this.more=!1,this.query="",this.selected(null)}}};t.a=r},"./vendor/cl/users/js/Lib/UserSelectorVue.vue?vue&type=style&index=0&id=e8e7f840&lang=scss&scoped=true&":function(e,t,s){"use strict";var r=s("./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/lib/loader.js?sourceMap!./node_modules/vue-loader/lib/index.js?!./vendor/cl/users/js/Lib/UserSelectorVue.vue?vue&type=style&index=0&id=e8e7f840&lang=scss&scoped=true&");s.n(r).a},"./vendor/cl/users/js/Lib/UserSelectorVue.vue?vue&type=template&id=e8e7f840&scoped=true&":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("div",{staticClass:"cl-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],attrs:{type:"text",maxlength:"150"},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}}),e._v(" "),s("a",{staticClass:"searcher",on:{click:function(t){t.preventDefault(),e.fetch(e.query)}}},[s("img",{attrs:{src:e.searcher}})]),e._v(" "),e.result.length>0||e.noresult?s("div",{staticClass:"cl-results"},[s("div",{staticClass:"cl-result-list"},e._l(e.result,function(t){return s("div",{on:{click:function(s){s.preventDefault(),e.selectUser(t)}}},[s("span",[s("a",{on:{click:function(s){s.preventDefault(),e.selectUser(t)}}},[e._v(e._s(t.userId))])]),e._v(" "),s("span",[s("a",{on:{click:function(s){s.preventDefault(),e.selectUser(t)}}},[e._v(e._s(t.name))])])])}),0),e._v(" "),e.noresult?s("div",{staticClass:"statement"},[e._v("No results...")]):e._e(),e._v(" "),e.more?s("div",{staticClass:"statement"},[e._v("...more...")]):e._e()]):e._e()]),e._v(" "),s("a",{on:{click:function(t){return t.preventDefault(),e.clear(t)}}},[s("img",{attrs:{src:e.deleter}})])])},n=[];r._withStripped=!0,s.d(t,"render",function(){return r}),s.d(t,"staticRenderFns",function(){return n})},"./vendor/cl/users/js/Vue/UserVueBase.vue":function(e,t,s){"use strict";var r={data:function(){return{site:Site,root:Site.root}},methods:{setTitle:function(e){this.$parent.setTitle(e)},setMenu:function(e){this.$parent.setMenu(e)},getMenu:function(){return this.$parent.getMenu()},clearMenu:function(){this.setMenu([])},addMenu:function(e,t){var s=this.getMenu();s.push({name:e,click:t}),this.setMenu(s)}}},n=s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),o=Object(n.a)(r,void 0,void 0,!1,null,null,null),i=s("./node_modules/vue-hot-reload-api/dist/index.js");i.install(s("./node_modules/vue/dist/vue.esm.js")),i.compatible&&(e.hot.accept(),e.hot.data?i.reload("12bbaef8",o.options):i.createRecord("12bbaef8",o.options)),o.options.__file="vendor/cl/site/js/Vue/PageVueBase.vue";var l={extends:o.exports,computed:{user:function(){return this.$store.state.user.user}}},d=Object(n.a)(l,void 0,void 0,!1,null,null,null),u=s("./node_modules/vue-hot-reload-api/dist/index.js");u.install(s("./node_modules/vue/dist/vue.esm.js")),u.compatible&&(e.hot.accept(),e.hot.data?u.reload("c7e4e49e",d.options):u.createRecord("c7e4e49e",d.options)),d.options.__file="vendor/cl/users/js/Vue/UserVueBase.vue";t.a=d.exports}})});